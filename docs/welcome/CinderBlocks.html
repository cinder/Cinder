<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<link rel="stylesheet" href="stylesheets/cinder.css" type="text/css" media="screen" />
	<meta http-equiv="content-type" content="text/html; charset=windows-1252">
	<title>CinderBlocks</title>
</head>
<body>

<div class="wrapper">
	<div class="header">
		<h1><a href="http://libcinder.org">Cinder</a><h1>
	</div>
	
	<div class="contents">

	<table style="width: 100%;"><tbody>
	  <tr>
	   <td>
		  <h1>CinderBlocks</h1>
		  <div>
		  A CinderBlock is a prepackaged collection of code and libraries which implement a
		  feature or exposes a library in Cinder. This includes bridges to libraries like
		  OpenCV and FMOD, as well as standalone implementations of features like TUIO support.
		  Cinder ships with several built-in CinderBlocks such as QuickTime and the
		  LocationManager. A CinderBlock can include source, headers, libraries and any other
		  resources it depends on.
		  </div>
	   </td>
	   <td style="padding-left: 50px; padding-right: 10px; vertical-align: top;">
	   	  <img src="cinderblocks_images/cinderblock.png" />
	   </td>
     </table>
  <div>
    <br />
  </div>

  <div>
    <a href="tinderbox.html">TinderBox</a> (Cinder's application-creation tool) is the most straightforward way to use CinderBlocks, though it is not
    strictly necessary and an experienced C++ user can add a CinderBlock to a project by
    hand. TinderBox parses the <i>blocks</i> directory of a Cinder installation and
    presents the user with a graphical interface like this:
  </div>

  <div>
    <br />
  </div>

  <div>
    <img src="tinderbox_images/2.png" /><br />
  </div>

  <div>
    <br />
  </div>

  <div>
    To learn more about using CinderBlocks from TinderBox, checkout <a href="cinderblocks.html">its documentation</a>.
  </div>

 <br />
 
  <div style="text-align: center; font-size: 15px; background-color:#EEEEEE;">
    <table style="width: 100%; border-spacing: 20px;">
      <tbody>
        <tr style="vertical-align: middle;">
          <td><b><center>The information which follows is only relevant to CinderBlock creators and maintainers.</b></center></td>
        </tr>
      </tbody>
    </table>
  </div>

  <h2>Specification</h2>

  <div>
    <p>Every CinderBlock must have a file named <em>cinderblock.xml</em> in its root.
    This file enumerates the files and dependencies of the CinderBlock using XML of the following form:
  </div>

  <div>
    <code>&lt;cinder&gt;</code>
  </div>

  <div>
    <code>&nbsp; &lt;block&gt;</code>
  </div>

  <div>
    <code>&nbsp; ...</code>
  </div>

  <div>
    <code>&nbsp; &lt;block&gt;</code>
  </div>

  <div>
    <code>&lt;/cinder&gt;<br /></code>
  </div>

  <div>
    <br />
  </div>

  <div>
    The <code>&lt;block&gt;</code> tag supports the following attributes:
  </div>

  <div>
    &nbsp; "<b>name"</b><b>&nbsp;(string)</b><b>:</b> The human-readable name of the
    block. Ex: "FMOD"
  </div>

  <div>
    &nbsp; "<b>id"</b><b>&nbsp;(string)</b><b>:</b> The unique identifier of the block
    expressed in&nbsp;<a href="http://en.wikipedia.org/wiki/Reverse_domain_name_notation"
    target="_blank">reverse-dns</a>. Ex:&nbsp;"org.libcinder.fmod"
  </div>

  <div>
    &nbsp; <b>"git" (string):</b> The URL of the CinderBlock's repository.
    Ex:&nbsp;"git://github.com/cinder/Cinder-OpenCV.git"
  </div>

  <div>
    &nbsp; "<b>author"</b><b>&nbsp;(string)</b>: The author or authors of the
    CinderBlock. Ex: "Cinder Project"
  </div>

  <div>
    &nbsp; "<b>summary"</b><b>&nbsp;(string)</b>: &nbsp;A paragraph-long description of
    the block and its purpose. Ex: "The FMOD API is a library for the creation and
    playback of interactive audio."
  </div>

  <div>
    &nbsp; "<b>license"</b><b>&nbsp;(string)</b>: &nbsp;The software license associated
    with the library. Ex: "GPL, Commercial"
  </div>

  <div>
    &nbsp; "<b>version"</b><b>&nbsp;(string)</b><b>:</b> &nbsp;The version of the
    underlying library when applicable. Ex: "4.44.06"
  </div>

  <div>
    &nbsp; <b>"url"&nbsp;(string):</b>&nbsp;&nbsp;The URL for a CinderBlock-specific
    webpage
  </div>

  <div>
    &nbsp;&nbsp;<b>"library"&nbsp;(string):</b>&nbsp;&nbsp;The URL for the library a
    CinderBlock may wrap, Ex: "http://www.fmod.org/"<br />
  </div>

  <div>
    <br />
  </div>

  <div>
    A <code>&lt;block&gt;</code> tag can contain a number of different elements. For standard files
    like headers, source files, assets, etc, the structure is as follows:
  </div>

  <div>
    <code>&lt;tag&gt;<i>path to the file relative
    cinderblock.xml</i>&lt;/tag&gt;</code>
  </div>

  <div>
    <b>Example:</b> <code>
    &lt;header&gt;include/example.h&lt;/header&gt;</code><b><br /></b>
  </div>

  <div>
    This path is replicated in the output, so a file that lives at <code>include/example.h</code> will be copied to <code><em>project-path</em>/blocks/<em>blockName</em>/include/example.h.</code>
  </div>

  <div>
    <b><br /></b>
  </div>

  <div>
    <code><b>&lt;source&gt;:</b></code> A source file, typically a .cpp or .mm file
  </div>

  <div>
    <code><b>&lt;header&gt;:&nbsp;</b></code>A header file, typically a .h file
  </div>

  <div>
    <code><b>&lt;resource&gt;:</b></code>&nbsp;A resource file. Added to Resources.rc on Windows, and
    added to the Resources group and build phase in Xcode.
  </div>

  <div>
    &nbsp;&nbsp;<b>"name" (string):</b> The name of the resource macro,&nbsp;i.e.
    RES_MY_LOGO (defined in Resources.h)
  </div>

  <div>
    <b>&nbsp; "type"</b><b>&nbsp;(string)</b><b>:</b> The type of the resource - only
    applies on MSW. i.e. IMAGE
  </div>

  <div>
    <b>&nbsp; "id" (int):</b> The integer ID of the resource - only applies on MSW. If
    omitted TinderBox automatically creates a unique ID for the type.
  </div>

  <div>
    <code><b>&lt;asset&gt;:</b></code> An asset file, added to the project's <i>assets</i>
    directory. <b>Note:</b> Uniquely, assets are copied to the project's <em>assets</em> folder regardless of the install type the user has selected for the CinderBlock.<br />
  </div>

  <div>
    <code><b>&lt;framework&gt;:</b></code> A Mac OS/iOS framework (Mac/iOS-only). May also be used
    with a System or SDK-relative dynamic library such as libiconv.dylib
  </div>

  <div>
    <code><b>&lt;buildCopy&gt;:</b></code> A file which is copied to the folder containing the build
    product as part of the build process - typically a DLL or dylib.<br />
  </div>
	<div>
    &nbsp;&nbsp;<b>"destination" (executables | frameworks | plugins ):</b> The Xcode destination type; the default is <em>executables</em>, which corresponds to the Contents/MacOS folder.
  </div>

  <div>
    <br />
  </div>

  <div>
    These attributes are shared among <code>&lt;source&gt;</code>, <code>&lt;header&gt;</code>, <code>&lt;resource&gt;</code>,
    <code>&lt;asset&gt;</code>, <code>&lt;framework&gt;</code>, and <code>&lt;buildCopy&gt;</code> tags
  </div>

  <div>
    <b>&nbsp;
    "replaceContents"</b><b>&nbsp;(boolean)</b><b>:</b>&nbsp;When&nbsp;<i>true</i>, the
    string&nbsp;<span style="white-space: pre;"><i>_TBOX_PREFIX_</i> is replaced with the
    project's name throughout the file's contents</span><br />
  </div>

  <div>
    <b>&nbsp; "replaceName"</b><b>&nbsp;(boolean)</b><b>:&nbsp;</b><b><span style=
    "font-weight: normal;">&nbsp;When&nbsp;</span><span style=
    "font-weight: normal;"><i>true</i></span><span style="font-weight: normal;">, the
    string&nbsp;</span><span style="font-weight: normal;"><span style=
    "white-space: pre;"><i>_TBOX_PREFIX_</i> is replaced in the output file's
    name</span></span><br /></b>
  </div>

  <div>
    <b>&nbsp; "absolute"</b><b>&nbsp;(boolean)</b><b>:</b> When <i>true</i>, the file
    path is considered to be absolute and will not be made relative to the output
  </div>

  <div>
    <b>&nbsp; "sdk"</b><b>&nbsp;(boolean)</b><b>:</b> When <i>true</i>, the file path is
    considered to be considered relative to the Mac/iOS system SDK (Mac/iOS-only)
  </div>

  <div>
    <b>&nbsp; "cinder"</b><b>&nbsp;(boolean)</b><b>:</b> When <i>true,</i> the file path
    is considered to be relative to the Cinder installation
  </div>

  <div>
    <b>&nbsp; "buildExclude" (boolean):</b> When <i>true</i>, the file is included in the
    project but is not added to a build step<b><br /></b>
  </div>

  <div>
    <b>&nbsp; "virtualPath" (string):</b> Sets a non-default location for the file as
    presented in the hierarchy of folders in the IDE
  </div>

  <div>
    <b><br /></b>
  </div>

  <div style="font-size: 15px;">
    <b>More Block Elements</b>
  </div>

  <div>
    <code><b>&lt;includePath&gt;:</b></code> Adds a directory to the output be searched for #include
    statements
  </div>

  <div>
    &nbsp; <b>"system" (boolean):</b> When <i>true</i>&nbsp;specifies a system
    header,&nbsp;i.e.&nbsp;<code>#include &lt;something.h&gt;</code>
    rather than <code>#include "something.h"</code>
  </div>

  <div>
    <code><b>&lt;frameworkPath&gt;:&nbsp;</b></code>Adds a directory to the output be searched for
    Mac/iOS frameworks (Mac/iOS-only)
  </div>

  <div>
    <code><b>&lt;libraryPath&gt;:&nbsp;</b></code> Adds a directory to the output be searched for
    static libraries
  </div>

  <div>
    <code><b>&lt;staticLibrary&gt;:&nbsp;</b></code> Adds a Mac/iOS .a or Windows .lib static library
    to the project<br />
  </div>

  <div>
    <code><b>&lt;dynamicLibrary&gt;:</b></code> Adds a Mac/iOS .dylib or Windows .dll dynamic library
    to the project
  </div>

  <div>
    <code><b>&lt;headerPattern&gt;:</b></code> Adds as headers all files matching the pattern,
    including wildcards (*) &lt;headerPattern&gt;include/*.h&lt;/headerPattern&gt;.<br />
  </div>

  <div>
    <code><b>&lt;sourcePattern&gt;:&nbsp;</b></code> Adds as source all files&nbsp;matching the
    pattern, including wildcards (*)
    &lt;sourcePattern&gt;src/*.cpp&lt;/sourcePattern&gt;.
  </div>

  <div>
    <code><b>&lt;setting&gt;:</b></code>&nbsp;Allows modification of an Xcode setting (Mac-only). The
    value of the element becomes the value of the setting.
  </div>

  <div>
    <b>&nbsp; "name" (string)</b>: The name of the setting inside of the .pbxproj file
  </div>

  <div>
    <code><b>&lt;outputExtension&gt;:</b></code>&nbsp;Specifies the file extension of the build
    product, i.e. ".scr" for Windows screensavers
  </div>

  <div>
    <b><br /></b>
  </div>

  <div style="font-size: 15px;">
    <b>High-level Block tags</b>
  </div>

  <div>
    <code><b>&lt;platform&gt;:</b></code> Specifies an OS, compiler, build configuration or iOS SDK.
    Explained further below.<b><br /></b>
  </div>

  <div>
    <b>&nbsp; "os"&nbsp;</b><b>(msw | macosx | ios)</b><b>:</b> Specifies an operating
    system
  </div>

  <div>
    <b>&nbsp; "compiler"&nbsp;</b><b>(xcode | vc2012 | vc2013)</b><b>:</b> Specifies a
    compiler
  </div>

  <div>
    <b>&nbsp; "config" (debug | release):</b> Specifies a build configuration
  </div>

  <div>
    <b>&nbsp; "sdk" (device | simulator):</b> Specifies an iOS SDK (iOS-only)
  </div>

  <div>
    <code><b>&lt;supports&gt;:</b></code> When a non-zero number of &lt;supports&gt; tags, specifies
    which operating systems a block supports; one config per tag
  </div>

  <div>
    <b>&nbsp; "os" (msw | macosx | ios):</b> Specifies the supported operating system.
  </div>

  <div>
    &nbsp; <b>"compiler" (xcode | vc2012 | vc2013):</b> Specifies the supported
    compiler.<b>&nbsp;</b>
  </div>

  <div>
    <code><b>&lt;requires&gt;:</b></code> Specifies a CinderBlock which a project template or
    CinderBlock requires, identified by its reverse-dns ID
  </div>

  <div>
    <b><br /></b>
  </div>

  <div style="font-size: 15px;">
    <b>&lt;Platform&gt; tags</b>
  </div>

  <div>
    &lt;platform&gt; tags group files which only should be included only when certain
    conditions are met. &lt;platform&gt; tags can be nested, and nesting implies
    boolean-ANDing of the conditions. For example
  </div>

  <div>
    <code>&lt;platform os="msw"&gt;</code>
  </div>

  <div>
    <code>&nbsp; &lt;header&gt;include/myLib.h&lt;/header&gt;</code>
  </div>

  <div>
    <code>&nbsp; &lt;platform config="debug"&gt;</code>
  </div>

  <div>
    <code>&nbsp; &nbsp;
    &lt;staticLibrary&gt;myLib_d.lib&lt;/staticLibrary&gt;</code>
  </div>

  <div>
    <code>&nbsp; &lt;/platform&gt;</code>
  </div>

  <div>
    <code>&nbsp; &lt;platform config="release"&gt;</code>
  </div>

  <div>
    <code>&nbsp;
    &nbsp;&nbsp;&lt;staticLibrary&gt;myLib.lib&lt;/staticLibrary&gt;</code>
  </div>

  <div>
    <code>&nbsp; &lt;/platform&gt;</code>
  </div>

  <div>
    <code>&lt;/platform&gt;</code>
  </div>

  <div>
    <b><br /></b>
  </div>

  <div>
    In the example above, both debug and release configurations on MSW would include the
    header <i>myLib.h</i>, but the MSW project's debug config would have
    <i>myLib_d.lib</i> added, while its release config would have <i>myLib.lib</i> added.
    A hypothetical Mac project would receive none of these files.
  </div>

  <div>
    <b><br /></b>
  </div>

  <h2>Creating Template Projects</h2>

  <div>
    A CinderBlock may optionally supply one or more project templates, which are meant to
    serve as a starting point for using the CinderBlock. For example, the OpenCV
    CinderBlock includes a project template which loads an image and performs a basic
    image processing operation on it.&nbsp;
  </div>

  <div>
    <b><br /></b>
  </div>

  <div>
    One or more project templates may be defined inside the <code>&lt;cinder&gt;</code> tag after the
    <code>&lt;block&gt;</code>
  </div>

  <code>
  <div>
    &lt;cinder&gt;
  </div>

  <div>
    &nbsp; &lt;block&gt;
  </div>

  <div>
    &nbsp; ...
  </div>

  <div>
    &nbsp; &lt;block /&gt;
  </div>


  <div>
    &nbsp;
    &lt;template&gt;<i>path/to/template.xml</i>&lt;\template&gt;
  </div>

  <div>
    &nbsp; ...
  </div>

  <div>
    &nbsp;
    &lt;template&gt;<i>path/to/another/template.xml</i>&lt;\template&gt;
  </div>

  <div>
    <code>&lt;/cinder&gt;<br /></code>
  </div>

  <div>
    <b><br /></b>
  </div>
  </code>

  <div>
    A <em>template.xml</em> file is structured very similarly to a <em>cinderblock.xml</em>
    file.&nbsp;Essentially all of the tags are the same.&nbsp;This file is used as the
    starting point for a new project, and it in turn will usually (but not necessarily)
    be based on one of the core App templates which ship with Cinder, located in the
    blocks/__AppTemplates folder. For a CinderBlock's template to be derived from one of
    these, the parent's unique ID should be cited in a <i>parent</i>&nbsp;attribute:
  </div>

  <code>
  <div>
    &lt;cinder&gt;
  </div>

  <div>
    &lt;template name="OpenCV: Basic"
    <b>parent="org.libcinder.apptemplates.basicopengl"</b>&gt;
  </div>

  <div>
    ...
  </div>

  <div>
    &lt;/template&gt;
  </div>

  <div>
    &lt;/cinder&gt;
  </div>

  <div>
    <b><br /></b>
  </div>
  </code>

  <h2>Best Practices for Maintainers</h2>

<ul style="list-style-type:disc;">
    <li>
      <div>
        <b>Include an icon:</b> TinderBox will detect and show a
        <i>cinderblock.png</i>&nbsp;if present. This should be at least a 72x72 pixel PNG
        with an alpha channel.<br />
      </div>
    </li>

    <li>
      <div>
        <b>Setup a git repo:</b> In order to allow users to include your library as a git
        submodule, it must have its own git repository.
      </div>
    </li>

    <li>
      <div>
        <b>Consider minimalism:</b> In many cases a minimal CinderBlock-specific API is
        preferable. An example is the Cinder OpenCV block, which serves more as a shim
        than as its own interface. Particularly when a library is already
        object-oriented, it may be the best design decision. It requires less maintenance
        and allows a user who is already familiar with the library to utilize her
        knowledge of it, rather than having to learn an "API to an API".
      </div>
    </li>

    <li>
      <div>
        <b>Pursue loose coupling:</b> For visually-oriented
        CinderBlocks<i>,</i>&nbsp;this may mean separating the render logic out into
        other classes or functions, particularly in the sense of not assuming an application is
        using OpenGL.
      </div>
    </li>

    <li>
      <div>
        <b>Weigh binaries:</b> In many instances a static library is unnecessary, and
        simply including a library's source files is adequate. This simplifies
        maintenance and allows the library to be used on platforms you may not have
        immediate access to. The CinderBlock for Box2D is an example of this technique.
        Other libraries, like OpenCV, must be static libraries. A natural decision maker
        would be whether the library requires a build system like CMake.
      </div>
    </li>

    <li>
      <div>
        <b>Favor static over dynamic libraries:&nbsp;</b>Cinder apps are designed to be self-contained whenever possible.&nbsp;</span>
      </div>
    </li>
  </ul>

  <div>
    <br />
  </div>

    <h3>Mac OS X &amp; iOS</h3>

  <ul style="list-style-type:disc;">
    <li>
      <div>
        Libraries should be universal binaries, supporting the i386 and x86_64
        architectures on Mac OS and the armv7 and armv7s architectures on iOS
      </div>
    </li>

    <li>
      <div>
        Where necessary, the C++ stdlib should be libc++, and the C++ Dialect must be
        C++11.&nbsp;
      </div>
    </li>
  </ul>

  <div>
    <br />
  </div>

  <h3>Windows</h3>

  <ul style="list-style-type:disc;">
    <li>
      <div>
        Make sure the C Runtime is Multithreaded Debug (/Mtd) for debug and Multithreaded
        (/MT) for Release.&nbsp;
      </div>
    </li>
  </ul>

<h2>Advanced: Custom App Templates</h2>
<p>Advanced users may want to create new App template types.  An organization may have a style they'd like all applications to conform to, or you may find yourself creating the same sort of application frequently. These templates are located at <em>Cinder/blocks/__AppTemplates</em>. Inside you'll see a directory for each of the default application types, and you can create your own here as well.</p>
<br />
<p>Very advanced users may find cause to modify lower level parameters of the Xcode and Visual C++ project files TinderBox creates. If you are familiar with the internals of your compiler's project files, you can modify the files located at <em>Cinder/blocks/__AppTemplates/__Foundation</em>. A key attribute of these files is that the string <code>_TBOX_CINDER_PATH_</code> will be replaced with the absolute file path to Cinder, and the string <code>_TBOX_PREFIX_</code> will be replaced with the user-provided project name.</p>


</div>
</body>
</html>
